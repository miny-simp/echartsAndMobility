<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
    <title>minzz 前端demo</title>
		<link rel="stylesheet" href="../css/base.css" />
		<link rel="stylesheet" href="../css/index.css" />
	</head>
	<body>
    <div class="content-page">
      <div id="heatMap" class="map-content"></div>
    </div>
  </body>
  <script src="../js/common/jquery.min.js" ></script>
	<script src="../echart/echarts-3.8.4.js" ></script>
	<script src="../echart/chart-common.js" ></script>
  <script src="../echart/geo/lianyungang-geo.js" ></script>
  <script>
    $(function() {
      initChartMap();
    })
    function initChartMap(){
      echarts.dispose(document.getElementById('heatMap'));
      lygChart = echarts.init(document.getElementById('heatMap'));
      var mapOption = createMapOption(mapName,lyg_areaArr);

      lygChart.setOption(mapOption);

      setTimeout(function(){
        lygChart.dispatchAction({
            type: 'showTip',
            seriesIndex:0,  // 显示第几个series
            dataIndex: 2 // 显示第几个数据
        });
      })
    }
    /**地图 */
    var lyg_areaArr =[
      {name: '赣榆分局', value:'2500', selected: false ,code:"320707000000"},
      {name: '连云分局', value:'1200', selected: false ,code:"320703000000"},
      {name: '灌云县局', value:'800', selected: false ,code:"320723000000"},
      {name: '海州分局', value:'1500', selected: false ,code:"320706000000"},
      {name: '东海分局', value:'600', selected: false ,code:"320722000000"},
      {name: '徐圩新区分局', value:'200', selected: false ,code:"320792000000"},
      {name: '灌南分局', value:'2800', selected: false ,code:"320724000000"},
      {name: '云台山风景区分局', value:'1600', selected: false ,code:"320793000000"},
      {name: '高新技术产业开发区分局', value:'1100', selected: false ,code:"320790000000"},
      {name: '开发区分局', value:'700', selected: false ,code:"320791000000"}
    ];
    var lygChart = null;
    var mapName = '连云港市';
    function createMapOption(mapName,mapData){
      var mapOption = {
        title : {
          show:false,
          text: mapName,
          subtext: '区划图',
          x:'center'
        },
        tooltip : {
          // show:false,
          trigger: 'item',
          axisPointer: {
            lineStyle: {
                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                    offset: 1,
                    color: 'rgba(122,154,227,0.5)'
                }, {
                    offset: 0.5,
                    color: 'rgba(115,207,218,0.5)'
                }], false),
                width:2
            }
          },
          // textStyle: {
          //     fontSize: _fontSize,
          //     color: '#fff'
          // },
          // backgroundColor: '#fff',
          padding:10,
          borderWidth:2,
          borderColor: 'rgba(110,138,203,0.5)',
          borderRadius:10,
          formatter:function(item){
            var sb = [];
            sb.push('<p style="background:url(../images/map_icon_1.png);width:125px;height:20px;"></p>');
            sb.push('<p style="font-size: 16px;font-weight:bold;padding-left:50px;margin-top:-25px;">人数：<span style="color:#58cdd4;">'+item.value+'</span>人</p>');
            sb.push('<hr style="width="100%";height:0;border-color:#666;>');
            sb.push('<p style="font-size: 16px;color:#fff;">'+item.name+'</p>');

            return sb.join('');
          }
        },  
        legend: {
          show:false,
          x: 'right',
          orient: 'vertical',
          textStyle: {
            fontSize: _fontSize,
            color: '#fff'
          },
          data:['连云港市']
        },
        visualMap: {
          // show: false,
          left: null,
          right: 0,
          calculable: false,
          // orient: 'horizontal',
          inRange: {
            color: ['#d94e5d', '#eac736', '#50a3ba'].reverse()
          },
          pieces: [ // lt（小于），gt（大于），lte（小于等于），gte（大于等于）
            {gt: 2001, color: '#e9b0b5'},
            {gt: 1001, lte: 2000, color: '#80c3ec'},
            {gt: 0, lte: 1000, color: '#9377f1'}
          ],
          color: ['#e9b0b5', '#80c3ec', '#9377f1'],
          padding: [5, 10],
          backgroundColor: 'rgba(37, 57, 98, 0.6)',
          textStyle: {
            fontSize: _fontSize,
            color: '#fff'
          }
        }, 
        geo:{
          map : mapName, //为保证图表的准确性，这里的一些属性需要和下面的一致
          silent: true, // 图形是否不响应和触发鼠标事件，默认为 false，即响应和触发鼠标事件。
          aspectScale : 0.75, 
          zoom : 1.2,
          top: '54',
          left : '22%',
          itemStyle : {//外边框(底层地图)的一些属性
            normal: {
              borderColor: 'rgba(45, 84, 130, 0.5)',
              borderWidth:1,
              shadowBlur:1,
              areaColor: '#2d5482'
            }
            // normal: {
            //   borderColor: 'rgba(147, 235, 248, 1)',
            //   borderWidth: 1,
            //   areaColor: {
            //       type: 'radial',
            //       x: 1,
            //       y: 1,
            //       r: 1,
            //       colorStops: [{
            //           offset: 0,
            //           color: 'rgba(147, 235, 248, .9)' // 0% 处的颜色
            //       }, {
            //           offset: 1,
            //           color: 'rgba(147, 235, 248, .9)' // 100% 处的颜色
            //       }],
            //       globalCoord: false // 缺省为 false
            //   },
            //   shadowColor: 'rgba(128, 217, 248, .2)',
            //   shadowOffsetX: 12,
            //   shadowOffsetY: 12,
            //   shadowBlur: 1
            // },
        }
        },                      
        series : [
          {
            name: mapName,
            type: 'map',
            map: mapName,
            mapType: 'lyg',
            // hoverable:false,//鼠标hover事件
            selectedMode:'single',//鼠标点击事件：单击
            // roam: true,  // 是否开启鼠标缩放和平移漫游。
            aspectScale : 0.75, //长宽比. default: 0.75
            zoom:1,//缩放倍数，放大1.2倍
            top: '20', //地图离上侧的距离。
            left : '18%',
            bottom: '20',//地图离上侧的距离。
            itemStyle:{
              normal:{
                label:{
                  show:true,
                  // formatter: '{b|{b}：} \n {c|{c}}',
                  textStyle:{
                    color:'#fff',
                    fontFamily:'Microsoft YaHei',
                    fontSize:14
                  },
                  // formatter: [
                  //   '{count|}{value|人数：{c}}',
                  //   '{brr|}',
                  //   '{hr|}',
                  //   '{local|{b}}'
                  // ].join('\n'),
                  // backgroundColor: '#fff',
                  // borderColor: '#58cdd4',
                  // borderWidth: 1,
                  // borderRadius: 4,
                  // padding: [5, 8],
                  // rich: {
                  //   count: {
                  //     height: 25,
                  //     align: 'left',
                  //     backgroundColor: {
                  //       image: mapIcons.Sunny
                  //     }
                  //   },
                  //   value: {
                  //     color: '#58cdd4',
                  //     fontSize: 18,
                  //     fontWeight: 'bold',
                  //     padding: [0, 0, 0, -95],
                  //     align: 'left'
                  //   },
                  //   brr: {
                  //     width: '100%',
                  //     height: 10
                  //   },
                  //   hr: {
                  //     borderColor: '#666',
                  //     width: '100%',
                  //     borderWidth: 0.5,
                  //     height: 0
                  //   },
                  //   local: {
                  //     padding: [0, 0, 10, 0],
                  //     fontSize: 14,
                  //     color: '#111'
                  //   }
                  // }
                },
                borderColor:'#ba86ec',
                borderWidth:'2',
                areaColor:'#2d5482'                                                         
              },
              emphasis:{
                shadowBlur:4,
                shadowOffsetX:5, //不同轴上的阴影
                shadowOffsetY:5, //体现凹凸效果
                borderWidth:2, //边框的宽度 
                borderColor: '#ededf2',
                shadowColor: '#6592c4',
                shadowBlur: 50,
                label: {
                    show: true,
                }
              }
            },
            data:mapData
          }              
        ]
      };
      return mapOption;
    }
  </script>
  </html>